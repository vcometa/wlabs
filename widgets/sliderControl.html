<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>filters POC</title>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script>

function rangeSlider( objectSelector, outputSelector ){

	var r = new Object();

		r.range = $(objectSelector);
		r.output = $(outputSelector);
		r.lH = $( r.range.find('.left-handle') );
		r.rH = $( r.range.find('.right-handle') );
		r.button = $( r.range.find('button') );
		r.sBar = $(r.range.find('.slider-bar'));
		r.coverLeft = $( r.range.find('.cover-left'));
		r.coverRight = $( r.range.find('.cover-right'));
		r.target = null;
		r.dragging = false;
		r.rLim = r.sBar.outerWidth() - r.button.outerWidth();
		r.outerLim = r.sBar.outerWidth() + r.button.outerWidth();
		r.minVal = parseInt( r.range.data('min') );
		r.maxVal = parseInt( r.range.data('max') );
		r.retMin = r.minVal;
		r.retMax = r.maxVal;
		r.ctr = 0;

/*
	var range = $(objectSelector),
		output = $(outputSelector),
		lH = $( range.find('.left-handle') ),
		rH = $( range.find('.right-handle') ),
		button = $( range.find('button') ),
		sBar = $(range.find('.slider-bar')),
		coverLeft = $( range.find('.cover-left')),
		coverRight = $( range.find('.cover-right')),
		target = null,
		dragging = false,
		rLim = sBar.outerWidth() - button.outerWidth(),
		outerLim = sBar.outerWidth() + button.outerWidth()
		minVal = parseInt( range.data('min') ),
		maxVal = parseInt( range.data('max') ),
		retMin = minVal;
		retMax = maxVal;
		ctr = 0;		*/
	
	r.button.on('mousedown', function(e){
	
		e.preventDefault();
		
		r.target = $( this );
		
		startX = e.clientX;
		
		//console.log( startX + ' :: '+ (sBar.outerWidth()+button.outerWidth()) );
		
		if( startX <= r.outerLim && startX >= 0){
		
			r.dragging = true;
		
		}
	
	});
	
	$(document).on('mousemove', function(e){
	
		e.preventDefault();
		
		
	
		if( r.dragging && e.clientX <= r.outerLim && e.clientX >= 0){
		
			var pos = ((e.clientX + document.body.scrollLeft - document.body.clientLeft)-r.button.width())<0?0:(e.clientX + document.body.scrollLeft - document.body.clientLeft)-r.button.width();
			
			var isMin = ( r.target.data('type') == 'min' )?true:false;
			
			//console.log( e.clientX +' :: '+pos);
			
			//console.log(rLim+ ' :: '+ pos);
			
			if( e.clientX <  r.rLim && e.clientX > 0){
		
				r.target.css('left', pos );
				
				var retVal = r.maxVal * (pos/r.rLim).toFixed(2);
				
				if( isMin ){
				
					r.retMin = retVal;
					
					r.coverLeft.width( pos );
				
				}else{
				
					r.retMax = retVal;
					
					r.coverRight.width( r.rLim - pos );
				
				}
			
			} else if( e.clientX <= 0 ){
			
				r.retMin = r.minVal;
		
				r.target.css('left', 0 );
			
			} else if( e.clientX >  r.rLim ){				
			
				r.target.css('left', r.rLim );
				
				if( isMin ){
				
					r.coverLeft.width( r.outerLim );
					
					r.retMin = r.maxVal;
				
				}else{
				
					r.coverRight.width( r.button.outerWidth() );
					
					r.retMax = r.maxVal;
				
				}
				
			}
			
			r.output.val( Math.round(r.retMin)+' to '+ Math.round(r.retMax) );
		
		}
	
	});

	$(document).on('mouseup', function(){
	
		if( r.dragging ){
		 
			r.dragging = false;
		
		}
	
	});

}

$(function() {

	rangeSlider( '#range-slider1', '#amount1' );
	
	rangeSlider( '#range-slider2', '#amount2' );
	
	rangeSlider( '#range-slider3', '#amount3' );

});

</script>
<style>

	.range-slider {
	
		position: relative;
		
		width: 300px;
		
		height: 30px;
		
		overflow: hidden;
	
	}
	
	.range-slider .slider-bar {
	
		position: absolute;
		
		top: 10px;
		
		left: 0;
	
		background: #333;
		
		width: 100%;
		
		height: 10px;
	
	}
	
	.range-slider .cover-left,

	.range-slider .cover-right {
	
		position: relative;
		
		margin: 10px auto;
		
		float: left;
		
		z-index:1;
	
		background: #ccc;
		
		width: 10px;
		
		height: 10px;
	
	}
	
	.range-slider .cover-right {
	
		float: right;
		
	}

	.range-slider button {
	
		position: absolute;
		
		top: 0;
		
		z-index: 9;
		
		width: 10px;
		
		height: 30px;
		
		border: 0;
		
		padding: 0;
		
		margin: 0;
		
		cursor: pointer;
	
	}
	
	.range-slider .left-handle {
		
		left: 0;
		
		background: red;
	
	}
	
	.range-slider .right-handle {
		
		right: 0;
		
		background: blue;
		
	}

</style>
</head>
<body>
	<div id="accordion">
		<h3>Price</h3>
		<div>
			<p>
				<input type="text" id="amount1" style="border: 0; color: #f6931f; font-weight: bold;" />
			</p>
			<div class="range-slider" id="range-slider1" data-min="0" data-max="500">
				<button class="left-handle" data-type="min"></button>
				<button class="right-handle" data-type="max"></button>
				<div class="cover-left"></div>
				<div class="cover-right"></div>
				<div class="slider-bar"></div>
				
			</div>
		</div>
		<h3>Kilometers</h3>
		<div>
			<p>
				<input type="text" id="amount2" style="border: 0; color: #f6931f; font-weight: bold;" />
			</p>
			<div class="range-slider" id="range-slider2" data-min="0" data-max="100000">
				<button class="left-handle" data-type="min"></button>
				<button class="right-handle" data-type="max"></button>
				<div class="cover-left"></div>
				<div class="cover-right"></div>
				<div class="slider-bar"></div>
				
			</div>
		</div>
		<h3>Age</h3>
		<div>
			<p>
				<input type="text" id="amount3" style="border: 0; color: #f6931f; font-weight: bold;" />
			</p>
			<div class="range-slider" id="range-slider3" data-min="0" data-max="50">
				<button class="left-handle" data-type="min"></button>
				<button class="right-handle" data-type="max"></button>
				<div class="cover-left"></div>
				<div class="cover-right"></div>
				<div class="slider-bar"></div>
				
			</div>
		</div>
		
		
	</div>
</body>
</html>