<!DOCTYPE html>
<html lang="en" data-protoform="true">
<head>
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Virgilio Cometa">
<meta charset="UTF-8">
<title>Prototype</title> 
<!--[if IE]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>
 
<body id="index" class="page">

	<header></header>
	
	<div class="body">
	
		<article class="article" data-template="true">
			<h1>
				<span data-bind="title" />
			</h1>
			<div class="content" data-bind="description"></div>
		</article>
		
	</div>
	
	<footer></footer>
	
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
	<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
	<script>
	
	(function ( $ ) {
		$.protoform = function(data) {
		
			var proto = {};
				proto.data = data;
		
			try{
			
				var init = function(){
			
					if( typeof $('html[data-protoform="true"]') != 'undefined' && $('html[data-protoform="true"]').length > 0){
			
						proto.template = $('[data-template="true"]');
						
						var node = $(proto.template),
						
							parent = $( node.parent() );
										
						for( key in proto.data.nodes ){
							
							var clone = $(node.clone()),
						
								elem = $( clone.find('[data-bind]') );
							
							for( var i=0, j = elem.length; i<j;i++ ){
							
								$( elem[i] ).html( proto.data.nodes[key][ $( elem[i] ).data('bind') ] ).removeAttr('data-bind');
								
								parent.append( clone.removeAttr('data-template') );
							}
						
						}
						
						proto.template.remove();
					
					}					
					
				};
				
				
				init();
				
			} catch( err ){
			
				console.log(err);
			
			}
				
			//return this;
		
		};
	}( jQuery ));
	
	$(function() {	
	
		var data = {
			
				nodes: {
					
					'000001':{
					
						title: "Lorem Ipsum",
						
						description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse fermentum molestie magna, vitae blandit tortor aliquam eu. Quisque rhoncus lorem magna, eu luctus sapien suscipit eu.'
					
					},
					
					'000002':{
					
						title: "Dolor Sit Amet",
						
						description: 'Aliquam rhoncus metus ac consequat venenatis. Pellentesque ut tortor vel orci mollis dapibus in eget felis. Vivamus vulputate aliquam molestie. Fusce a augue tempus, pretium neque ut, faucibus est.'
					
					},
					
					'000003':{
					
						title: "The quick brown fox",
						
						description: 'Sed eros ipsum, cursus sollicitudin mollis eu, condimentum sit amet dolor. Phasellus vel augue pharetra, feugiat eros eget, auctor ipsum. Proin mollis velit at enim auctor lacinia.'
					
					}
				
				}
		
			};
	
		$.protoform(data);
	
	});
	</script>
</body>
</html>
