 <!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>rotator</title>
<style>
.rotator{
	margin:0;
	display:block;
	position:relative;
	width:1500px;
	height:323px;
	overflow:hidden;
}
.rotator ul{
	margin:0 auto;
	padding:0;
	display:block;
	position:relative;
	overflow:visible;
	width:2000px;
	height:323px;
	margin:0 0 0 -500px;
}
.rotator li{
	visibility:hidden;
	list-style:none;
	position:absolute;
	left:0;
	top:0;
	width:500px;
	-webkit-transition:all 0.6s ease-in-out;
	-moz-transition:all 0.6s ease-in-out;
	-o-transition:all 0.6s ease-in-out;
	transition:all 0.6s ease-in-out;
	-webkit-transform:translate3D(0px, 0px, 0px),
	-moz-transform:translate3D(0px, 0px, 0px),
	-o-transform:translate3D(0px, 0px, 0px),
	transform:translate3D(0px, 0px, 0px)
}
.rotator li:first-child{
	visibility:visible;
}
.rotator li:nth-child(2),
.rotator li:nth-child(3),
.rotator li:nth-child(4){
	visibility:visible;
}
.rotator figure{
	margin:0 auto;
	display:block;
	width:100%;
	height:auto;
}
.rotator img{
	float:left;
	width:100%;
	height:auto;
}
.rotator figcaption{
	position:absolute;
	background:#000;
	width:auto;
	height:50px;
	font-weight:bold;
	font-family:arial;
	font-size:30px;
	color:#fff;
	bottom:0;
	left:0;
	text-align:center;
	line-height:50px;
	padding:10px 15px;
	opacity:0;
	-webkit-transition:all 0.6s ease-in-out;
	-moz-transition:all 0.6s ease-in-out;
	-o-transition:all 0.6s ease-in-out;
	transition:all 0.6s ease-in-out;
}
.rotator li:nth-child(3) figcaption{
	opacity:1;
}
.loadmore{
	background:#000;
	display:none;
	margin:10px 0;
	border:0;
	padding:10px 15px;
	font-family:arial;
	font-weight:bold;
	font-size:16px;
	color:#fff;
	cursor:pointer;
}
.loadmore.active{
	display:block;
}
.loadmore.disabled{
	background:#999;
	cursor:default;
	color:#666;
}
.block{
	position:absolute;
	top:0;
	width:500px;
	height:323px;
	background:rgba(0,0,0,0.6);
	z-index:100;
}
.block span{
    display: block;
    height: 30px;
    padding: 10px;
    position: absolute;
    top: 43%;
    width: 30px;
	cursor:pointer;
}
.block.block-left,
.block.block-left span{
	left:0;
}
.block.block-right,
.block.block-right span{
	right:0;
}
.block.block-left span{
	background:rgba(255, 255, 255, 0.3) url(images/slider-arrows.png) 14px 14px no-repeat;
}
.block.block-right span{
	background:rgba(255, 255, 255, 0.3) url(images/slider-arrows.png) -40px 14px no-repeat;
}
.block.block-left span:hover{
	background:rgba(255, 255, 255, 0.3) url(images/slider-arrows.png) 14px -36px no-repeat;
}
.block.block-right span:hover{
	background:rgba(255, 255, 255, 0.3) url(images/slider-arrows.png) -40px -36px no-repeat;
}
</style>
</head>

<body>

	<div class="rotator">
		<div class="block block-left"><span></span></div>
		<div class="block block-right"><span></span></div>
		<ul>
			<li>
				<figure>
					<img src="http://driving.wpdev5.canada.com/wp-content/uploads/sites/10/2014/07/rs5c140011.jpg?quality=80&strip=all"/>
					<figcaption>1. Fusce maximus, elit non</figcaption>
				</figure>
			</li>
			<li>
				<figure>
					<img src="http://driving.wpdev5.canada.com/wp-content/uploads/sites/10/2014/07/rs5c140012.jpg?quality=80&strip=all"/>
					<figcaption>2. Suspendisse sodales, justo</figcaption>
				</figure>
			</li>
			<li>
				<figure>
					<img src="http://driving.wpdev5.canada.com/wp-content/uploads/sites/10/2014/07/rs5c140025.jpg?quality=80&strip=all"/>
					<figcaption>3. Vivamus sit amet nulla</figcaption>
				</figure>
			</li>
			<li>
				<figure>
					<img src="http://driving.wpdev5.canada.com/wp-content/uploads/sites/10/2014/07/rs5c140034.jpg?quality=80&strip=all"/>
					<figcaption>4. Class aptent taciti </figcaption>
				</figure>
			</li>
			<li>
				<figure>
					<img src="http://driving.wpdev5.canada.com/wp-content/uploads/sites/10/2014/07/rs5c140035.jpg?quality=80&strip=all"/>
					<figcaption>5. Curabitur euismod, quam eu</figcaption>
				</figure>
			</li>
			<li>
				<figure>
					<img src="http://driving.wpdev5.canada.com/wp-content/uploads/sites/10/2014/07/rs5c140037.jpg?quality=80&strip=all"/>
					<figcaption>6. Ut feugiat sem vel </figcaption>
				</figure>
			</li>
		</ul>
	</div>
<button class="loadmore">load more</button>
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script>
$(function() {
	var rotator = {};
		rotator.clickCount = rotator.listLength = 0,
		initializeVar = function(){
			rotator.m = $('.rotator');
			rotator.ul = $(rotator.m.find('ul'));
			rotator.li = $(rotator.m.find('li'));
			rotator.buttons = $(rotator.m.find('.block span'));
			rotator.load = $('.loadmore');
			rotator.listLength = rotator.li.length-1;
		},
		setOrder = function(dir){
			for(var i=0, k=rotator.listLength;i<=rotator.listLength;i++){
				var li = $(rotator.li[i]),
					x = (rotator.li.width()*i);
				li.css({'z-index':k--,
						'-webkit-transform':'translate3D('+x+'px, 0px, 0px)',
						'-moz-transform':'translate3D('+x+'px, 0px, 0px)',
						'-o-transform':'translate3D('+x+'px, 0px, 0px)',
						'transform':'translate3D('+x+'px, 0px, 0px)'
				});
			}
		},
		clickTracker = function(){
			rotator.clickCount = rotator.clickCount+1;
			if(rotator.clickCount >= rotator.listLength){
				rotator.clickCount = 0;
				//rotator.load.addClass('active');
			}
		},
		moveSlide = function(dir){
			var index = dir==-1?0:rotator.listLength,
				li = $(rotator.li[index]);
			if(dir<=-1){
				li.appendTo(rotator.ul);
			}else{
				li.prependTo(rotator.ul);
			}
			initializeVar();
			setOrder(dir);
			clickTracker();
		},
		idleCheck = function(){
			clearTimeout(rotator.idletimer);
			rotator.idletimer = setTimeout(function(){
				autoRotate(rotator.auto, rotator.interval);
			},5000);
		},
		bindClick = function(e){
			rotator.buttons.on('click',function(e){
				e.stopImmediatePropagation();
				var dir = $(this).parent().hasClass('block-left')?-1:1;
				if(rotator.auto){
					clearInterval(rotator.autotimer);
					idleCheck();
				}
				moveSlide(dir);
			});
			
			rotator.m.on('mouseover',function(e){
				if(rotator.auto){
					clearInterval(rotator.autotimer);
					clearTimeout(rotator.idletimer);
				}
			});
			rotator.m.on('mouseout',function(e){
				if(rotator.auto){
					clearInterval(rotator.autotimer);
					idleCheck();
				}
			});
		},
		loadMore = function(){
			rotator.load.on('click',function(e){
				$.ajax({
					method: "GET",
					dataType: "json",
					url: "imagelist.json",
					success: function(data){
						var images = data.images, liObj = $();
						for(var i=0;i<images.length;i++){
							
							liObj = liObj.add( 
								$('<li>',{'id':images[i].id}).append(
									$('<figure>').append(
										$('<img>',{'src':images[i].url}),
										$('<figcaption>').text( images[i].caption)
									)
								) 
							);
						}
						liObj.insertAfter('.rotator li:first-child');
						rotator.clickCount = rotator.listLength;
						initializeVar();
						setOrder(-1);
						bindClick();
						rotator.load.removeClass('active');
					}
				});
			});
		},
		autoRotate = function(isRotate, interval){
			rotator.auto = isRotate;
			rotator.interval = interval;
			if(isRotate){
				rotator.autotimer = setInterval(function(){
					moveSlide(-1);
				}, interval);
			}else{
				clearInterval(rotator.autotimer);
			}
		},
		Init = function(){
			initializeVar();
			$(rotator.li[rotator.listLength]).prependTo(rotator.ul);
			rotator.ul = $(rotator.m.find('ul'));
			rotator.li = $(rotator.m.find('li'));
			setOrder(-1);
			bindClick();
			autoRotate(true, 3500);
			//loadMore();
		}
	Init();
});
</script>
</body>

</html> 